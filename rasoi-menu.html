<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Khazaana Rasoi | Khazaana</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="icon" type="image/png" sizes="32x32" href="/favicon.png">
<link rel="apple-touch-icon" href="/favicon-180x180.png">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:"Segoe UI",sans-serif}
body{background:#fffaf3;color:#1f2937;padding-bottom:140px}

/* HEADER */
header{
  position:sticky;top:0;z-index:1000;
  background:#ffffffdd;backdrop-filter:blur(10px);
  box-shadow:0 6px 20px rgba(0,0,0,.08);
}
.nav{
  max-width:1200px;margin:auto;padding:16px 24px;
  display:flex;justify-content:space-between;align-items:center;
}
.logo{font-size:22px;font-weight:800;color:#b45309}
.nav a{text-decoration:none;margin-left:20px;color:#374151}

/* HERO */
.hero{text-align:center;padding:50px 20px 30px}
.hero h1{font-size:36px;color:#b45309}
.hero p{color:#6b7280}
.badge{
  display:inline-block;margin-top:10px;
  background:#fde68a;color:#92400e;
  padding:6px 14px;border-radius:20px;
  font-weight:600;font-size:14px;
}

/* MENU */
.menu{
  max-width:1000px;margin:auto;padding:20px;
  display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));
  gap:24px;
}
.section{
  background:#fff;border-radius:20px;padding:20px;
  box-shadow:0 12px 30px rgba(0,0,0,.08);
}
.section h2{color:#b45309;font-size:18px;margin-bottom:12px}
.item{
  display:flex;justify-content:space-between;align-items:center;
  padding:8px 0;border-bottom:1px dashed #e5e7eb;
}
.item:last-child{border-bottom:none}
.controls{display:flex;align-items:center;gap:6px}
.btn{
  width:26px;height:26px;border:none;border-radius:6px;
  background:#b45309;color:#fff;font-weight:700;cursor:pointer;
}
.qty{min-width:18px;text-align:center;font-weight:600}

/* CART BAR */
.cart-bar{
  position:fixed;bottom:0;left:0;width:100%;
  background:#fff;border-top:1px solid #e5e7eb;
  box-shadow:0 -8px 20px rgba(0,0,0,.1);
  padding:14px 20px;z-index:9999;
}
.cart-info{font-size:14px;margin-bottom:8px}
.cart-info b{font-size:15px}
.order-btn{
  width:100%;padding:14px;border:none;border-radius:10px;
  background:#25D366;color:#fff;font-size:16px;
  font-weight:800;cursor:pointer;
}
.note{font-size:12px;color:#6b7280;text-align:center;margin-top:6px}
.free{color:#16a34a;font-weight:700}
</style>
</head>

<body>

<header>
  <div class="nav">
    <div class="logo">Khazaana</div>
    <div>
      <a href="index.html">Home</a>
      <a href="restaurants.html">Restaurants</a>
    </div>
  </div>
</header>

<section class="hero">
  <h1>Khazaana Rasoi</h1>
  <p>Ghorer Moto Ranna</p>
  <div class="badge">üöö Free delivery on orders above ‚Çπ350</div>
</section>

<section class="menu" id="menu"></section>

<!-- CART -->
<div class="cart-bar">
  <div class="cart-info">
    Subtotal: ‚Çπ<span id="subtotal">0</span> |
    Delivery: <span id="delivery">‚Çπ0</span> |
    <b>Total: ‚Çπ<span id="total">0</span></b>
  </div>
  <button class="order-btn" onclick="orderWhatsApp()">Order on WhatsApp</button>
  <div class="note">Minimum order ‚Çπ100 (excluding delivery)</div>
</div>

<script>
const DELIVERY_FEE = 30;
const FREE_DELIVERY_LIMIT = 350;
const MIN_ORDER = 100;
const PHONE = "918695902696";

const menuData = {
  "üçõ Thali": [
    ["Veg Thali",65],
    ["Chicken Thali",135],
    ["Fish Thali",110],
    ["Mutton Thali",230]
  ],
  "üçΩ Roti Meals": [
    ["Roti Meal Chicken",90],
    ["Roti Meal Mutton",180]
  ],
  "üçó Main Dishes": [
    ["Chicken (2 pcs)",70],
    ["Mutton (2 pcs)",160],
    ["Fish (per piece)",40]
  ],
  "üçö Add-ons": [
    ["Extra Rice",10],
    ["Roti",7]
  ],
  "üç≥ Tadka": [
    ["Egg Tadka (Half)",45],
    ["Egg Tadka (Full)",80],
    ["Plain Tadka (Half)",45],
    ["Plain Tadka (Full)",75]
  ]
};

const cart = {};

function renderMenu(){
  const menu = document.getElementById("menu");
  for(const section in menuData){
    let html = `<div class="section"><h2>${section}</h2>`;
    menuData[section].forEach(([name,price])=>{
      cart[name] = cart[name] || {price,qty:0};
      html += `
        <div class="item">
          <span>${name} ‚Çπ${price}</span>
          <div class="controls">
            <button class="btn" onclick="updateQty('${name}',-1)">‚àí</button>
            <span class="qty" id="q-${name}">0</span>
            <button class="btn" onclick="updateQty('${name}',1)">+</button>
          </div>
        </div>`;
    });
    html += `</div>`;
    menu.innerHTML += html;
  }
}
renderMenu();

function updateQty(item,change){
  cart[item].qty = Math.max(0, cart[item].qty + change);
  document.getElementById("q-"+item).innerText = cart[item].qty;
  updateTotals();
}

function updateTotals(){
  let subtotal = 0;
  for(const i in cart){
    subtotal += cart[i].qty * cart[i].price;
  }

  let delivery = 0;
  if(subtotal > 0 && subtotal < FREE_DELIVERY_LIMIT){
    delivery = DELIVERY_FEE;
  }

  document.getElementById("subtotal").innerText = subtotal;
  document.getElementById("delivery").innerHTML =
    delivery === 0 && subtotal >= FREE_DELIVERY_LIMIT
    ? "<span class='free'>FREE</span>"
    : "‚Çπ"+delivery;
  document.getElementById("total").innerText = subtotal + delivery;
}

function orderWhatsApp(){
  let subtotal = 0;
  let text = "";

  for(const i in cart){
    if(cart[i].qty > 0){
      const itemTotal = cart[i].qty * cart[i].price;
      subtotal += itemTotal;
      text += `${i} x${cart[i].qty} = ‚Çπ${itemTotal}\n`;
    }
  }

  if(subtotal < MIN_ORDER){
    alert("Minimum order ‚Çπ100 required");
    return;
  }

  const delivery = subtotal >= FREE_DELIVERY_LIMIT ? 0 : DELIVERY_FEE;
  const total = subtotal + delivery;

  text += `\nSubtotal: ‚Çπ${subtotal}`;
  text += `\nDelivery: ${delivery === 0 ? "FREE" : "‚Çπ"+delivery}`;
  text += `\nTotal: ‚Çπ${total}`;

  window.location.href =
    "https://api.whatsapp.com/send?phone="+PHONE+"&text="+
    encodeURIComponent(
      "Hello üëã\nOrder from *Khazaana Rasoi*\n\n"+text
    );
}
</script>

</body>
</html>
